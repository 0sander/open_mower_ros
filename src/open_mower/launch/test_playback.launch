<launch>
    <arg name="bagfile" />
    <arg name="s" default="0" />
    <arg name="r" default="1" />

    <node pkg="rosbag" type="play" name="player" output="log" args="--clock $(arg bagfile) -s$(arg s) -r$(arg r) /tf:=/tf_null"/>

<!--    <include file="$(find open_mower)/launch/_transforms.launch" />-->
<!--    <include file="$(find open_mower)/launch/include/_localization.launch" />-->

    <node pkg="mower_logic" type="ekf_odometry" name="ekf_odometry" output="screen" required="true">
    </node>

    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find open_mower)/rviz/playback.rviz" required="true" />

<!--    <node pkg="open_mower_ros" type="area_recorder" name="area_recorder" output="screen">-->
<!--    </node>-->
<!--    <node pkg="mower_map" type="mower_map_service" name="map_service" output="screen" />-->
    <node pkg="rqt_reconfigure" type="rqt_reconfigure" name="rqt_reconfigure" />

<!--    <rosparam file="$(find open_mower)/params/ekf.yaml" command="load" />-->

<!--    <node pkg="robot_localization" type="ekf_localization_node" name="ekf_gps_orientation">-->

<!--    </node>-->
    <node pkg="xbot_positioning" type="xbot_positioning" name="xbot_positioning" output="screen">
        <remap from="~/imu" to="/imu/data_raw"/>
        <remap from="~/wheel_ticks" to="/mower/wheel_ticks"/>
        <remap from="~/xb_pose" to="/driver_gps_node/xb_pose"/>
    </node>
</launch>
